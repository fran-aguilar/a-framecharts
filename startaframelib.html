<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.js" integrity="sha256-cIcPwh2GcosI6bCl+ZAZt2j0Sk1QfgQ1ejEpjYOfa8g=" crossorigin="anonymous"></script>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="js/smoothcurvepath.js"></script>
    <script src="js/aframe-grid.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    <script src="js/func.js"></script>
</head>
<body>

    <a-scene inspector>
        <a-entity camera look-controls wasd-controls mouse-cursor position="0 2 12.31" rotation="-6.07 -1.72 0">

        </a-entity>
        <!--<a-box position="0 0 -5" color="red" width="0.5" height="0.5"></a-box>-->
        <!--<a-box position="0 0 -1.25" color="red"></a-box>
        <a-box position="0 0  1" color="red"></a-box>-->
    </a-scene>
    <h1 id="test">titulo </h1>
    <script>
        //testing purposes..
        var pointsSmoothChart = "[{\"key\":\"foo\",\"value\":20},{\"key\":\"foo\",\"value\":58},{\"key\":\"foo\",\"value\":4},{\"key\":\"foo\",\"value\":19},{\"key\":\"foo\",\"value\":4},{\"key\":\"foo\",\"value\":36},{\"key\":\"foo\",\"value\":11},{\"key\":\"foo\",\"value\":37},{\"key\":\"foo\",\"value\":36},{\"key\":\"foo\",\"value\":50},{\"key\":\"foo\",\"value\":63},{\"key\":\"foo\",\"value\":28},{\"key\":\"foo\",\"value\":88},{\"key\":\"foo\",\"value\":19},{\"key\":\"foo\",\"value\":24},{\"key\":\"foo\",\"value\":95},{\"key\":\"foo\",\"value\":8},{\"key\":\"foo\",\"value\":26},{\"key\":\"foo\",\"value\":2},{\"key\":\"foo\",\"value\":17},{\"key\":\"foo\",\"value\":24},{\"key\":\"foo\",\"value\":70},{\"key\":\"foo\",\"value\":94},{\"key\":\"foo\",\"value\":115},{\"key\":\"foo\",\"value\":249},{\"key\":\"foo\",\"value\":76},{\"key\":\"foo\",\"value\":68},{\"key\":\"foo\",\"value\":88},{\"key\":\"foo\",\"value\":69},{\"key\":\"foo\",\"value\":37},{\"key\":\"foo\",\"value\":52},{\"key\":\"foo\",\"value\":133},{\"key\":\"foo\",\"value\":127},{\"key\":\"foo\",\"value\":111},{\"key\":\"foo\",\"value\":150},{\"key\":\"foo\",\"value\":277},{\"key\":\"foo\",\"value\":258},{\"key\":\"foo\",\"value\":114},{\"key\":\"foo\",\"value\":301},{\"key\":\"foo\",\"value\":156},{\"key\":\"foo\",\"value\":146},{\"key\":\"foo\",\"value\":216},{\"key\":\"foo\",\"value\":226},{\"key\":\"foo\",\"value\":193},{\"key\":\"foo\",\"value\":239},{\"key\":\"foo\",\"value\":223},{\"key\":\"foo\",\"value\":126},{\"key\":\"foo\",\"value\":284},{\"key\":\"foo\",\"value\":213},{\"key\":\"foo\",\"value\":60},{\"key\":\"foo\",\"value\":292},{\"key\":\"foo\",\"value\":236},{\"key\":\"foo\",\"value\":131},{\"key\":\"foo\",\"value\":286},{\"key\":\"foo\",\"value\":120},{\"key\":\"foo\",\"value\":258},{\"key\":\"foo\",\"value\":238},{\"key\":\"foo\",\"value\":324},{\"key\":\"foo\",\"value\":191},{\"key\":\"foo\",\"value\":233},{\"key\":\"foo\",\"value\":303},{\"key\":\"foo\",\"value\":128},{\"key\":\"foo\",\"value\":108},{\"key\":\"foo\",\"value\":247},{\"key\":\"foo\",\"value\":304},{\"key\":\"foo\",\"value\":74},{\"key\":\"foo\",\"value\":261},{\"key\":\"foo\",\"value\":174},{\"key\":\"foo\",\"value\":315},{\"key\":\"foo\",\"value\":209},{\"key\":\"foo\",\"value\":242},{\"key\":\"foo\",\"value\":136},{\"key\":\"foo\",\"value\":252},{\"key\":\"foo\",\"value\":67},{\"key\":\"foo\",\"value\":140},{\"key\":\"foo\",\"value\":333},{\"key\":\"foo\",\"value\":299},{\"key\":\"foo\",\"value\":179},{\"key\":\"foo\",\"value\":99},{\"key\":\"foo\",\"value\":246},{\"key\":\"foo\",\"value\":150},{\"key\":\"foo\",\"value\":215},{\"key\":\"foo\",\"value\":284},{\"key\":\"foo\",\"value\":404},{\"key\":\"foo\",\"value\":59}]";
        pointsSmoothChart = eval(pointsSmoothChart);

        var scene = document.querySelector('a-scene');
        var dashBoard = new AFRAMEDC.DashBoard(scene);
        panel = new AFRAMEDC.Panel(dashBoard, [5, -5, -1], 4).title('working with usual data');
        var panel2 = new AFRAMEDC.Panel(dashBoard, [24, -5, -1], 4).title('crossfilter data interaction');
        panel2.size([18, 18]);
        panel.size([18, 18]);
        //var mysmoothchart = new AFRAMEDC.SmoothCurveChart(panel);
        var mypiechart1 = new AFRAMEDC.BarsChart(panel).numberOfYLabels(11).gridsOn();
        var mypiechart2 = new AFRAMEDC.BarsChart(panel).numberOfYLabels(11).gridsOn();
        var mypiechart3 = new AFRAMEDC.BarsChart(panel).numberOfYLabels(11).gridsOn();
        var mypiechart4 = new AFRAMEDC.BarsChart(panel).numberOfYLabels(11).gridsOn();
        //mypiechart.data([{ key: 'a', value: 25 }, { key: 'b', value: 45 }, { key: 'c', value: 10 }]);
        //mypiechart2.data([{ key: 'a', value: 234 }, { key: 'b', value: 6 }, { key: 'c', value: 8 }, { key: 'c', value: 6 }, { key: 'c', value: 10 }, { key: 'ffc', value: 10 }]);
        //mypiechart1.data([{ key: 'a', value: 25 }, { key: 'b', value: 45 }, { key: 'c', value: 10 }]);
        //mypiechart2.data([{ key: 'a', value: 25 }, { key: 'b', value: 45 }, { key: 'c', value: 10 }]);
        //mypiechart3.data([{ key: 'a', value: 25 }, { key: 'b', value: 45 }, { key: 'c', value: 10 }]);
        //mypiechart4.data([{ key: 'a', value: 25 }, { key: 'b', value: 45 }, { key: 'c', value: 10 }]);
        mypiechart1.data(pointsSmoothChart).gridsOn();
        mypiechart2.data(pointsSmoothChart).gridsOn();
        mypiechart3.data([{ key: 'a', value: 234 }, { key: 'b', value: 6 }, { key: 'c', value: 8 }, { key: 'c', value: 6 }, { key: 'c', value: 10 }, { key: 'ffc', value: 10 }]).gridsOn();
        mypiechart4.data(pointsSmoothChart).gridsOn();

        //panel with crossfilter data.
        payments = crossfilter([
   { date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab" },
   { date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab" },
   { date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa" },
   { date: "2011-11-14T16:30:43Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T16:53:41Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0, type: "cash" },
   { date: "2011-11-14T16:58:03Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T17:22:59Z", quantity: 2, total: 90, tip: 0, type: "tab" },
   { date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0, type: "cash" },
   { date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa" }
        ]);
        var dimTotal = payments.dimension(function (d) { return d.total; });
        var dimType = payments.dimension(function (d) { return d.type; });
        var groupTotal = dimTotal.group();
        var groupType = dimType.group().reduceCount();

        var mypiechart21 = new AFRAMEDC.PieChart(panel2).numberOfYLabels(11).gridsOn();
        var mybarchart22 = new AFRAMEDC.BarsChart(panel2).numberOfYLabels(11).gridsOn();
        mybarchart22.dimension(dimTotal).group(groupTotal);
        mypiechart21.dimension(dimType).group(groupType);
        dashBoard.addPanel(panel);
        dashBoard.addPanel(panel2);
        dashBoard.renderAll();
        //dashBoard.addChart(mypiechart);
        //TODO: orbit controls
        //document.addEventListener('keydown', function (event) {
        //    var camera = document.querySelector('[camera]');
        //    var initpos = camera.getAttribute('position');
        //    if (event.key === "a") {
        //        initpos.x = initpos.x + 0.1;

        //    }else if(event.key === "d"){
        //        initpos.x = initpos.x - 0.1;

        //    }else if(event.key ==="w"){
        //        initpos.y = initpos.y + 0.1;
        //    }else if (event.key === "s") {
        //        initpos.y = initpos.y - 0.1;
        //    }
        //    camera.setAttribute('position', initpos);
        //});
        //document.addEventListener('wheel', function (event) {
        //    //debug
        //    //console.log("ev: " + "x: " + event.deltaX + "y:" + event.deltaY + "z: " + event.deltaZ +"mode: " + event.deltaMode + "but " + event.which);
        //    var camera = document.querySelector('[camera]');
        //    var cameraSettings = camera.getAttribute('camera');
        //    if (event.deltaY > 0) {
        //        cameraSettings.fov +=  1;
        //    } else {
        //        cameraSettings.fov -=  1;
        //    }
        //    camera.setAttribute('camera', cameraSettings);
        //});
        var h1elem = document.querySelector('#test');
        h1elem.mywidth = 2;
        h1elem.mylength = 3;
        h1elem.mifuncionsuma = function (a, b) {
            return a + b;
        };

    </script>
</body>
</html>